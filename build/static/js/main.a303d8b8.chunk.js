(this.webpackJsonpinterview=this.webpackJsonpinterview||[]).push([[0],{19:function(e,t,n){},25:function(e,t,n){e.exports=n(40)},30:function(e,t,n){},31:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(21),s=n.n(i),l=(n(30),n(7)),o=n(8),c=n(11),u=n(10),m=n(9),d=n(6),h=n(1);n(31);var p=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Welcome to Winky interview"))},g=(n(19),n(15)),f=n.n(g),v=n(22),E=function(){var e=Object(v.a)(f.a.mark((function e(t,n,a,r){var i,s,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i="https://intervieapi.ts.r.appspot.com/".concat(t),s={"Content-type":"application/json"},a&&(s.Authorization=a),r){e.next=9;break}return e.next=6,fetch(i,{method:n,headers:s});case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,fetch(i,{method:n,headers:s,body:JSON.stringify(r)});case 11:e.t0=e.sent;case 12:return l=e.t0,e.next=15,l.json();case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),b=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onChangeName=function(e){a.setState({name:e.target.value},(function(){a.validate()}))},a.onChangeEmail=function(e){a.setState({email:e.target.value},(function(){a.validate()}))},a.onChangePassword=function(e){a.setState({password:e.target.value},(function(){a.validate()}))},a.onsubmit=function(){var e=a.state,t=e.name,n=e.email,r=e.password;n&&r&&t?E("login","POST",null,{name:t,email:n,password:r}).then((function(e){e&&e.token?(a.setState({errors:[]}),window.sessionStorage.setItem("token",e.token),a.props.updateUserData(e.userid,e.token)):a.setState({errors:e})})).catch((function(e){console.log(e)})):a.setState({errors:["*All fields required"]})},a.validate=function(){var e=a.state,t=e.email,n=e.password,r=e.name;return t&&n&&r?(a.setState({errors:[]}),!0):(a.setState({errors:["*All fields required"]}),!1)},a.state={email:"",password:"",name:"",errors:[]},a}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state.errors.map((function(e){return r.a.createElement("p",{className:"error"},e)}));return r.a.createElement(r.a.Fragment,null,this.props.isloggedIn?r.a.createElement(h.a,{to:"profile"}):r.a.createElement("div",{className:"form-container"},r.a.createElement("h2",null,"Login Form"),r.a.createElement("span",null,r.a.createElement("label",null,"Name:"),r.a.createElement("input",{onChange:this.onChangeName,type:"text",id:"nameField"})),r.a.createElement("span",null,r.a.createElement("label",null,"Email:"),r.a.createElement("input",{onChange:this.onChangeEmail,type:"text",id:"emailField"})),r.a.createElement("span",null,r.a.createElement("label",null,"Password:"),r.a.createElement("input",{onChange:this.onChangePassword,type:"password",id:"passField"})),e,r.a.createElement("button",{className:"submit",onClick:this.onsubmit},"Login")))}}]),n}(r.a.Component),k=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onChangeName=function(e){a.setState({name:e.target.value},(function(){a.validate()}))},a.onChangeEmail=function(e){a.setState({email:e.target.value},(function(){a.validate()}))},a.onChangePassword=function(e){a.setState({password:e.target.value},(function(){a.validate()}))},a.onsubmit=function(){var e=a.state,t=e.name,n=e.email,r=e.password;n&&r&&t?E("register","POST",null,{name:t,email:n,password:r}).then((function(e){e&&e.token?(a.setState({errors:[]}),window.sessionStorage.setItem("token",e.token),a.props.updateUserData(e.userid,e.token)):a.setState({errors:e})})).catch((function(e){console.log(e)})):a.setState({errors:["*All fields required"]})},a.validate=function(){var e=a.state,t=e.email,n=e.password,r=e.name;t&&n&&r?a.setState({errors:[]}):a.setState({errors:["*All fields required"]})},a.state={email:"",password:"",name:"",errors:[]},a}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state.errors.map((function(e){return r.a.createElement("p",{className:"error"},e)}));return r.a.createElement(r.a.Fragment,null,this.props.isloggedIn?r.a.createElement(h.a,{to:"profile"}):r.a.createElement("div",{className:"form-container"},r.a.createElement("h2",null,"Registration Form"),r.a.createElement("span",null,r.a.createElement("label",null,"Name:"),r.a.createElement("input",{onChange:this.onChangeName,type:"text",id:"nameField"})),r.a.createElement("span",null,r.a.createElement("label",null,"Email:"),r.a.createElement("input",{onChange:this.onChangeEmail,type:"text",id:"emailField"})),r.a.createElement("span",null,r.a.createElement("label",null,"Password:"),r.a.createElement("input",{onChange:this.onChangePassword,type:"password",id:"passField"})),e,r.a.createElement("button",{className:"submit",onClick:this.onsubmit},"Register")))}}]),n}(r.a.Component);n(38);var w=function(e){var t=e.isloggedIn;return r.a.createElement("div",{className:"Header"},!t&&r.a.createElement("li",null,r.a.createElement(d.b,{to:"/login"},"Login")),!t&&r.a.createElement("li",null,r.a.createElement(d.b,{to:"/register"},"Register")),t&&r.a.createElement("li",null,r.a.createElement(d.b,{to:"/profile"},"Profile")))},C=(n(39),function(e){var t=e.urls;return r.a.createElement("div",{className:"image-cont"},t.map((function(e,t){return r.a.createElement("img",{src:e,alt:"movie",key:"".concat(e,"-").concat(t)})})))}),S=function(e){var t=e.list,n=e.title,a=e.onClickFn,i=e.buttonText;return r.a.createElement("div",{className:"movie-cont"},r.a.createElement("h2",null,n),t.map((function(e){return r.a.createElement("div",{className:"movie",key:e._id},r.a.createElement("p",{className:"movie-name"},e.title),r.a.createElement("p",null,"Rating: ",e.rating," / 5 "),r.a.createElement(C,{urls:e.imagesUrl}),r.a.createElement("button",{onClick:function(){return a(e)},className:"add-button"},i))})))},O=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).addToWish=a.addToWish.bind(Object(c.a)(a)),a.deleteFromWish=a.deleteFromWish.bind(Object(c.a)(a)),a.state={movies:[],wishlist:[]},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;E("profile","GET",this.props.token,null).then((function(t){t&&t.movies&&e.setState({movies:t.movies,wishlist:t.wishlist})})).catch((function(e){console.log(e)}))}},{key:"addToWish",value:function(e){var t=this,n=this.props.token;E("profile","POST",n,{title:e.title}).then((function(n){if("succeed"===n){var a=t.state.wishlist.concat(e);t.setState({wishlist:a})}})).catch((function(e){console.log(e)}))}},{key:"deleteFromWish",value:function(e){var t=this,n=this.props.token;E("profile","DELETE",n,{title:e.title}).then((function(n){if("succeed"===n){var a=t.state.wishlist.filter((function(t){return t._id!==e._id}));t.setState({wishlist:a})}})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state,t=e.movies,n=e.wishlist;return r.a.createElement("div",{className:"container"},r.a.createElement(S,{list:t,title:"Recommended Movies",onClickFn:this.addToWish,buttonText:"Add"}),r.a.createElement(S,{list:n,title:"Wishlist",onClickFn:this.deleteFromWish,buttonText:"Remove"}))}}]),n}(r.a.Component),j=n(24),y=function(e){var t=e.component,n=e.isloggedIn,a=Object(j.a)(e,["component","isloggedIn"]);return r.a.createElement(h.b,a,n&&r.a.createElement(t,a))},F=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).updateUserData=a.updateUserData.bind(Object(c.a)(a)),a.state={isloggedIn:!1,userid:"",token:null},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=window.sessionStorage.getItem("token");t&&E("login","GET",t,null).then((function(n){e.updateUserData(n.userid,t)})).catch((function(e){return console.log(e)}))}},{key:"updateUserData",value:function(e,t){e&&t?this.setState({isloggedIn:!0,userid:e,token:t}):this.setState({isloggedIn:!1,userid:"",token:null})}},{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement(w,{isloggedIn:this.state.isloggedIn}),r.a.createElement(h.d,null,r.a.createElement(y,{path:"/profile",component:O,isloggedIn:this.state.isloggedIn,token:this.state.token}),r.a.createElement(h.b,{exact:!0,path:"/login"},r.a.createElement(b,{updateUserData:this.updateUserData,isloggedIn:this.state.isloggedIn})),r.a.createElement(h.b,{exact:!0,path:"/register"},r.a.createElement(k,{updateUserData:this.updateUserData,isloggedIn:this.state.isloggedIn})),r.a.createElement(h.b,{exact:!0,path:"/"},r.a.createElement(p,null))))}}]),n}(r.a.Component),I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)}))};s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(F,null)),document.getElementById("root")),I()}},[[25,1,2]]]);
//# sourceMappingURL=main.a303d8b8.chunk.js.map